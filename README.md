# go-microservice-starter

My simple implementation of what a Go microservice should consist of.

## `/cmd/app`

This directory contains the application configuration logic as well as logic for
setting up routes.

#### `/main.go`

- initializes the application's configuration parameters
- initializes a database connection
- initializes any internal services
- initializes http routes
- starts the application

#### `/config/config.go`

- sets the application's configuration parameters
- sets logger configuration parameters
- sets database configuration parameters
- creates service instances

#### `/routes/routes.go`

- sets up http router
- connects route handlers to service logic

#### `/routes/posthello.go`

- an example of a route handler
- file name follows the format,`/v1` being ignored:

| file name        | http endpoint               |
|------------------|-----------------------------|
| getusers         | `GET /v1/users`             |
| getusersid       | `GET /v1/users/{id}`        |
| postusers        | `POST /v1/users`            |
| putusersiddevice | `PUT /v1/users/{id}/device` |
| deleteusersid    | `DELETE /v1/users/{id}`     |

#### `/routes/structs.go`

- structs used in the `routes` package

#### `/routes/util.go`

- utility logic used in the `routes` package

## `/database`

This directory contains queries and table schemas for use with `sqlc`.

#### `/query/query.sql`

- stores the SQL queries which are converted into go code via `sqlc`

#### `/schema/schema.sql`

- stores the SQL table schemas

## `/internal`

This directory contains all the internal business logic. Each package within
`internal` should contain a `service` which can be injected into other services
via dependency injection. An example of this is inside the `greeting` service
where the database connection has been injected.

#### `/database/db.go`

- auto-generated by `sqlc`

#### `/database/models.go`

- auto-generated by `sqlc`

#### `/database/querier.go`

- auto-generated by `sqlc`

#### `/database/query.sql.go`

- auto-generated by `sqlc`

#### `/database/service.go`

- service logic for connecting to the database

#### `/database/structs.go`

- structs used in the `database` package

#### `/validate/service.go`

- a business service for validating incoming `JSON` request bodies

#### `/validate/util.go`

- functions for returning `JSON` schemas for validation

#### `/validate/validatepostgreeting.go`

- an example of a `JSON` schema used to validate `POST /greeting` request body

#### `/greeting/service.go`

- an example of a business service

#### `/greeting/sayhello.go`

- business logic for returning a greeting

#### `/greeting/structs.go`

- structs used within the `greeting` package
